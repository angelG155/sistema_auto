<div class="principal">
  <header style="display: flex; justify-content: space-between; position: relative;">
    <div class="container">
      <h1><span class="highlight">WJ</span> Car Sales</h1>
      <p>El Mejor Precio del Mercado</p>
    </div>
    <!-- Botón del menú móvil -->
    <button class="d-block d-lg-none btn text-white"
            style="background: none; border: none; z-index: 1070; position: absolute; right: 1rem; top: 1rem;"
            (click)="toggleSidebar()">
      <i class="bi bi-list" style="font-size: 2rem;"></i>
    </button>
    <!-- Información de contacto (visible en desktop) -->
    <div style="width: 70%;" class="mt-4 d-none d-lg-flex flex-col lg:flex-row gap-4 lg:gap-8">
      <div class="flex items-center gap-2 text-gray-300 hover:text-[#41d7a7] transition-colors">
        <i class="bi bi-phone"></i>
        <span>+1 (234) 567-8900</span>
      </div>
      <div class="flex items-center gap-2 text-gray-300 hover:text-[#41d7a7] transition-colors">
        <i class="bi bi-envelope"></i>
        <span>contactoneautos.com</span>
      </div>
      <div class="flex items-center gap-2 text-gray-300 hover:text-[#41d7a7] transition-colors">
        <i class="bi bi-geo-alt"></i>
        <span>123 Auto Drive, CA 90210</span>
      </div>
    </div>
  </header>

  <!-- Sidebar móvil -->
  <div class="position-fixed top-0 end-0 h-100 bg-dark p-4"
       style="width: 280px; transform: translateX(100%); transition: transform 0.3s ease-in-out; z-index: 1080;"
       [style.transform]="isSidebarOpen ? 'translateX(0)' : 'translateX(100%)'">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h5 class="text-white mb-0">Contacto</h5>
      <button class="btn text-white"
              style="background: none; border: none;"
              (click)="toggleSidebar()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
    <div class="d-flex flex-column gap-4">
      <a href="tel:+12345678900" class="d-flex align-items-center gap-3 text-white text-decoration-none">
        <i class="bi bi-phone"></i>
        <span>+1 (234) 567-8900</span>
      </a>
      <a href="mailto:contactoneautos.com" class="d-flex align-items-center gap-3 text-white text-decoration-none">
        <i class="bi bi-envelope"></i>
        <span>contactoneautos.com</span>
      </a>
      <div class="d-flex align-items-center gap-3 text-white">
        <i class="bi bi-geo-alt"></i>
        <span>123 Auto Drive, CA 90210</span>
      </div>
    </div>
  </div>

  <!-- Overlay del sidebar -->
  <div class="position-fixed top-0 start-0 w-100 h-100 bg-dark"
       style="opacity: 0; visibility: hidden; transition: all 0.3s ease-in-out; z-index: 1070;"
       [style.opacity]="isSidebarOpen ? '0.5' : '0'"
       [style.visibility]="isSidebarOpen ? 'visible' : 'hidden'"
       (click)="toggleSidebar()">
  </div>

  <section class="car-showcase">
    <div class="container">
      <div style="font-weight: bold;" class="showcase-intro">
        <h2>Encuentra tu vehículo</h2>
        <p>Descubre nuestra selección de vehículos de alta calidad con los mejores precios del mercado</p>
      </div>

      <div style="height: 500px;" class="relative h-screen w-full overflow-hidden bg-gradient-to-b">
        <div class="position-absolute top-0 start-0 end-0 bottom-0 d-flex align-items-center justify-content-center">
          <div class="position-relative w-100 mx-auto" style="max-width: 72rem; height: 600px;">
            @for (car of cars; track car.id; let index = $index) {
            @if (car.top_sales) {
            <div class="position-absolute top-50 start-50 transition-all cursor-pointer"
              style="width: min(800px, 90vw); height: min(400px, 70vh); transition-duration: 700ms;" [style]="getSlideStyle(index)"
              (mouseenter)="setIsAutoPlaying(false)" (mouseleave)="setIsAutoPlaying(true)"
              (click)="openCarModal(car)">
              <div style="border-radius: 30px;" class="position-relative w-100 h-100 shadow-lg overflow-hidden">
                <img [src]="car.imagenUrlCompleta" [alt]="car.nombre" class="w-100 h-100 object-fit-cover" />
                <div
                  class="position-absolute top-0 start-0 end-0 bottom-0 bg-dark bg-opacity-50 d-flex flex-column justify-content-end p-4">

                  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center">
                    <div class="mb-3 mb-md-0">
                      <h2 class="display-6 text-white fw-bold mb-2" style="font-size: clamp(1.5rem, 4vw, 2.5rem);">
                        {{ car.nombre }}
                      </h2>
                      <p style="padding-right: 20px; max-height: 4.5em; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; line-height: 1.5em; font-size: clamp(0.875rem, 2vw, 1rem);" class="text-light">
                        {{ car.descripcion }}
                      </p>
                    </div>
                    <div class="mt-auto mt-md-0">
                      <div>
                        <div class="text-end">
                          <p style="color: white; font-size: clamp(1rem, 3vw, 1.25rem); font-weight: 500;" class="mb-0">
                            {{ formatNumber(car.millas) }} mi
                          </p>
                        </div>
                        <p class="fw-bold mb-0" style="color: white; font-size: clamp(1.25rem, 3.5vw, 1.5rem);">
                          ${{car.precio}}
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            }
            }
          </div>
        </div>
        <!-- Navigation Controls -->
        <button (click)="goToPrevious()"
          class="position-absolute start-4 top-50 translate-middle-y text-white border-0 d-flex align-items-center justify-content-center"
          style="z-index: 1000; width: 48px; height: 48px; cursor: pointer; transition: all 0.3s ease;">
          <span class="d-none d-lg-flex align-items-center justify-content-center bg-dark bg-opacity-50 rounded-circle"
                style="width: 60px; height: 60px; padding: 15px;">
            <i class="bi bi-chevron-left" style="font-size: 2.5rem;"></i>
          </span>
          <span class="d-lg-none">
            <i class="bi bi-chevron-left" style="font-size: 2.5rem;"></i>
          </span>
        </button>
        <button (click)="goToNext()"
          class="position-absolute end-4 top-50 translate-middle-y text-white border-0 d-flex align-items-center justify-content-center"
          style="z-index: 1000; width: 48px; height: 48px; cursor: pointer; transition: all 0.3s ease;">
          <span class="d-none d-lg-flex align-items-center justify-content-center bg-dark bg-opacity-50 rounded-circle"
                style="width: 60px; height: 60px; padding: 15px;">
            <i class="bi bi-chevron-right" style="font-size: 2.5rem;"></i>
          </span>
          <span class="d-lg-none">
            <i class="bi bi-chevron-right" style="font-size: 2.5rem;"></i>
          </span>
        </button>
        <!-- Dots Navigation -->
        <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2">
          @for (car of cars; track car.id; let index = $index) {
          @if (car.top_sales) {
          <button (click)="goToSlide(index)" class="w-3 h-3 rounded-full transition-all"
            [class]="index === currentIndex ? 'bg-white scale-125' : 'bg-white/50 hover:bg-white/75'"></button>
          }
          }
        </div>
      </div>

      <!-- Car Listing with Bootstrap -->
      <div class="container py-5">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          @for (car of cars; track car.nombre; let index = $index) {
          @if (!car.top_sales) {
          <div class="col">
            <div class="card rounded-4 overflow-hidden shadow h-100 cursor-pointer"
              style="transition: all 0.3s ease; cursor: pointer;" (click)="openCarModal(car)"
              onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
              <div class="position-relative" style="height: 260px;">
                <img [src]="car.imagenUrlCompleta" [alt]="car.nombre"
                  class="w-100 h-100 object-fit-cover" />
              </div>
              <div class="card-body p-4">
                <div class="mb-3">
                  <h2 style="color: #666;" class="fs-3 fw-bold mb-1">{{car.nombre}}</h2>
                  <p class="fs-5 text-secondary">{{car.modelo}}</p>
                </div>

                <div class="d-flex justify-content-between align-items-center mb-4">
                  <div>
                    <p class="fs-3 fw-bold mb-0" style="color: #41d7a7;">
                      ${{car.precio}}
                    </p>
                  </div>
                  <p class="fs-4">-</p>
                  <div class="text-end">
                    <p style="color: black; font-size: 20px; font-weight: 500;" class=" mb-0">
                      {{formatNumber(car.millas)}} mi
                    </p>
                  </div>
                </div>

                <div class="bg-light rounded-3 p-3 mb-4" style="max-height: 80px; overflow-y: auto;">
                  <p class="text-secondary mb-0">
                    @for (caracteristica of car.caracteristicas; track caracteristica) {
                    <a style="color: rgb(126, 126, 119);">{{caracteristica}} | </a>
                    }
                  </p>
                </div>

                <button (click)="onWhatsAppClick(car, $event)"
                  class="btn w-100 text-white fw-semibold py-2 px-4 rounded-3 position-relative overflow-hidden"
                  style="background-image: linear-gradient(to right, #25D366, #20BD5A);">
                  <div class="position-absolute top-0 start-0 end-0 bottom-0" style="background-image: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.1), rgba(255,255,255,0));
                        transform: translateX(-200%);
                        transition: transform 0.7s;">
                  </div>
                  <span class="d-flex align-items-center justify-content-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                      class="bi bi-chat-dots-fill" viewBox="0 0 16 16">
                      <path
                        d="M16 8c0 3.866-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.584.296-1.925.864-4.181 1.234-.2.032-.352-.176-.273-.362.354-.836.674-1.95.77-2.966C.744 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7M5 8a1 1 0 1 0-2 0 1 1 0 0 0 2 0m4 0a1 1 0 1 0-2 0 1 1 0 0 0 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2" />
                    </svg>
                    <span class="small fw-semibold">Consultar por WhatsApp</span>
                  </span>
                </button>
              </div>
            </div>
          </div>
          }
          }@empty {
          <div class="no-cars">
            <p>No hay vehículos disponibles en este momento.</p>
          </div>
          }
        </div>
      </div>
    </div>

    <!--Seccion Garantia-->
    <div class="container-fluid py-5">
      <div class="container">
        <div class="row align-items-center">
          <!-- Columna izquierda con texto -->
          <div class="col-md-6">
            <h1 class="fw-bold text-success mb-4" style="color: #0d483c !important; font-size: 3.2rem;">
              Compra Rápido,<br>
              Tranquilo y Seguro
            </h1>
            <ul class="list-unstyled">
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Fácil</span>
              </li>
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Garantía</span>
              </li>
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Seguridad</span>
              </li>
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Atención Personalizada</span>
              </li>
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Respaldo</span>
              </li>
              <li class="mb-3">
                <span class="text-warning me-2">✓</span>
                <span class="fs-5">Transparencia</span>
              </li>
            </ul>
          </div>

          <!-- Columna derecha con imagen -->
          <div class="col-md-6">
            <div class="rounded-4 overflow-hidden">
            <img src="../../../assets/img/auto/img-auto.jpeg" alt="Volkswagen SUV azul" class="img-fluid rounded-4" style="width: 100%; height: auto;">
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

</div>


<footer class="bg-dark text-white py-5">
  <div class="container">
    <div class="row" style="display: flex; justify-content: space-between;">
      <!-- Column 1 - ONE + Description -->
      <div class="col-12 col-md-4 mb-4 mb-md-0">
        <h3 class="fs-4 fw-semibold text-success mb-3">
          ONE
        </h3>
        <p style="color: white;" class="Z mb-3">
          ONE es tu mejor opción para comprar y vender autos.
          Ofrecemos una experiencia personalizada y transparente, conectando compradores y vendedores de manera segura y
          eficiente.
        </p>
        <div class="d-flex align-items-center gap-3 mb-4">
          <a href="#" class="text-secondary hover-text-white">
            <i class="bi bi-facebook"></i>
          </a>
          <a href="#" class="text-secondary hover-text-white">
            <i class="bi bi-instagram"></i>
          </a>
          <a href="#" class="text-secondary hover-text-white">
            <i class="bi bi-linkedin"></i>
          </a>
          <a href="#" class="text-secondary hover-text-white">
            <i class="bi bi-youtube"></i>
          </a>
          <a href="#" class="text-secondary hover-text-white small">
            privacy policy
          </a>
        </div>
      </div>

      <!-- Column 3 - Business Hours -->
      <div class="col-12 col-md-3 mb-4 mb-md-0">
        <h4 style="color: white;" class="fs-5 fw-semibold mb-3">Horario de Atención</h4>
        <ul class="list-unstyled">
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Lunes</span>
            <span>9am a 6pm</span>
          </li>
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Martes</span>
            <span>9am a 6pm</span>
          </li>
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Miércoles</span>
            <span>9am a 6pm</span>
          </li>
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Jueves</span>
            <span>9am a 6pm</span>
          </li>
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Viernes</span>
            <span>9am a 6pm</span>
          </li>
          <li class="d-flex justify-content-between mb-2">
            <span class="text-secondary">Sábado</span>
            <span>9am a 1pm</span>
          </li>
        </ul>
      </div>

      <!-- Column 4 - Contact -->
      <div class="col-12 col-md-2 mb-4 mb-md-0">
        <h4 style="color: white;" class="fs-5 fw-semibold mb-3">Encuéntranos</h4>
        <ul class="list-unstyled">
          <li class="mb-2">
            <a href="#" class="text-secondary text-decoration-none">
              Nuestro Equipo
            </a>
          </li>
          <li class="mb-2">
            <a href="#" class="text-secondary text-decoration-none">
              Libro de Reclamaciones
            </a>
          </li>
        </ul>
      </div>
    </div>

  </div>
</footer>

<!-- Modal de Detalles del Carro -->
@if (showModal && selectedCar) {
<div class="modal-backdrop fixed-top w-100 h-100 bg-dark opacity-75" style="z-index: 1050; backdrop-filter: blur(4px);">
</div>
<div class="modal d-block position-fixed top-0 left-0 w-100 h-100 d-flex align-items-center justify-content-center p-4"
  style="z-index: 1055;">
  <div class="modal-dialog modal-dialog-scrollable modal-xl m-0 max-w-100" style="max-width: 800px; max-height: 90vh;">
    <div class="modal-content border-0 rounded-4 overflow-hidden">

      <!-- Modal Header with Image -->
      <div class="position-relative">
        <img [src]="selectedCar.imagenUrlCompleta" [alt]="selectedCar.nombre"
          class="w-100 h-100 object-fit-cover d-none d-lg-block"
          style="max-height: 400px; height: 320px; object-position: center;" />
        <img [src]="selectedCar.imagenUrlCompleta" [alt]="selectedCar.nombre"
          class="w-100 d-block d-lg-none"
          style="height: min(320px, 50vh); object-fit: contain; background-color: rgba(0, 0, 0, 0.03);" />
        <button
          class="position-absolute top-0 end-0 mt-4 me-4 btn btn-sm rounded-circle bg-dark bg-opacity-50 text-white p-2"
          style="backdrop-filter: blur(4px);" (click)="closeModal()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body p-4 p-md-5">
        <!-- Car Title and Year -->
        <div class="mb-4 mb-md-5">
          <h2 class="display-6 fw-bold mb-2">
            {{selectedCar.nombre}}
          </h2>
          <p class="fs-3 text-secondary">{{selectedCar.anio}}</p>
        </div>

        <!-- Car Specifications -->
        <div class="bg-light rounded-4 px-4 py-3 mb-4 mb-md-5">
          <div class="row row-cols-1 row-cols-md-3 g-3 g-md-4">
            <div class="col">
              <h3 class="text-secondary mb-1 small">Marca</h3>
              <p class="fs-5 mb-0">{{selectedCar.marca}}</p>
            </div>
            <div class="col">
              <h3 class="text-secondary mb-1 small">Modelo</h3>
              <p class="fs-5 mb-0">{{selectedCar.modelo}}</p>
            </div>
            <div class="col">
              <h3 class="text-secondary mb-1 small">Color</h3>
              <p class="fs-5 mb-0">{{selectedCar.color}}</p>
            </div>
          </div>
        </div>

        <!-- Price and Characteristics -->
        <div class="row mb-4 mb-md-5">
          <div class="col">
            <h3 class="text-secondary mb-2 small">Precio</h3>
            <p class="fs-2 fw-bold mb-0" style="color: #41d7a7;">
              ${{selectedCar.precio}}
            </p>
          </div>
          <div class="col text-end">
            <h3 class="text-secondary mb-1">Millas</h3>
            <div class="d-flex flex-wrap gap-2 justify-content-end">
              <span class="fs-6 fw-bold text-black">{{formatNumber(selectedCar.millas)}} miles</span>
            </div>
          </div>
        </div>

        <!--Caracteristicas-->
        <div class="col mb-4">
          <h3 class="text-secondary mb-2 small">Características</h3>
          <div class="d-flex flex-wrap gap-2">
            @for (caracteristica of selectedCar.caracteristicas; track caracteristica) {
            <span class="badge bg-secondary p-2 fs-6">{{caracteristica}}</span>
            }
          </div>
        </div>

        <!-- Description -->
        <div class="mb-4 mb-md-5">
          <h3 class="text-secondary mb-2 small">Descripción</h3>
          <p class="fs-5 lh-base">
            {{selectedCar.descripcion}}
          </p>
        </div>

        <!-- Action Buttons -->
        <div class="d-flex gap-3">
          <button class="btn flex-grow-1 text-white rounded-3 px-4 py-2 position-relative overflow-hidden"
            style="background-image: linear-gradient(to right, #25D366, #20BD5A);"
            (click)="onWhatsAppClick(selectedCar, $event)">
            <div class="position-absolute top-0 start-0 end-0 bottom-0" style="background-image: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,0.1), rgba(255,255,255,0));
                          transform: translateX(-200%);
                          transition: transform 0.7s;">
            </div>
            <span class="d-flex align-items-center justify-content-center gap-2">
              <i class="fab fa-whatsapp"></i>
              <span class="small fw-semibold">Consultar por WhatsApp</span>
            </span>
          </button>
        </div>
      </div>

    </div>
  </div>
</div>
}